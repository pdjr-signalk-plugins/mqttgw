{
  "title": "Signal K - MQTT Gateway",
  "type": "object",
  "required": ["port"],
  "properties": {
    "broker": {
      "type": "object",
      "properties": {
        "url": {
          "type": "string",
          "title": "MQTT server url (eg: mqtt://192.168.1.203)",
          "default": ""
        },
        "username": {
          "type": "string",
          "title": "MQTT server username",
	        "default": ""
        },
        "password": {
          "type": "string",
          "title": "MQTT server password",
	        "default": ""
        },
        "rejectunauthorised": {
          "type": "boolean",
          "title": "What is this?",
          "default": true
        }
      }
    },
    "publication": {
      "type": "object",
      "properties": {
        "root": {
          "type": "string",
	        "title": "Prefix to apply to all published topic names",
	        "default": ""
	      },
        "retaindefault": {
          "type": "boolean",
          "title": "Default retain setting for published topic data",
          "default": true
        },
        "intervaldefault": {
          "type": "number",
          "title": "Default minimum interval between topic updates in seconds",
          "default": 60
        },
	      "paths": {
          "type": "array",
          "title": "Signal K self paths which should be published to the remote MQTT server",
          "default": [{ "path": "navigation.position" }],
          "items": {
            "type": "object",
            "properties": {
              "path": { "type": "string", "title": "Path", "default": "" },
              "topic": { "title": "Publish a simple value to this topic", "type": "string", "default": "" },
              "retain": { "title": "Ask the server to retain the most recent value", "type": "boolean", "default": true },
              "interval": { "type": "number", "title": "Minimum interval between updates for this path to be sent to the server", "default": 60 }
            },
	          "required": [ "path" ]
          }
	      }
      }
    },
    "subscription": {
      "type": "object",
      "properties": {
        "root": {
          "type": "string",
          "title": "Prefix to apply to all received subscription paths",
          "default": "mqtt."
        },
        "topics": {
          "type": "array",
          "title": "MQTT paths to receive",
          "default": [],
          "items": {
            "type": "object",
            "properties": {
              "topic": { "title": "Receive a value from this topic", "type": "string" },
              "path": { "type": "string", "title": "Path", "default": "" }
            }
          }
        }
      }
    }
  }
}
